<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">  
  
<struts>  
    <package name="actions" extends="struts-default">  
        <action name="LoginAction" class="actions.LoginAction">  
            <result name="success">/home.jsp</result>
            <result name="error">/index.jsp</result>  
        </action>
        <action name="UsuarioAction" class="actions.UsuarioAction">  
            <result name="success">/usuario.jsp</result>              
            <result name="add" type="redirectAction">GetListadoUsuariosAction</result>
            <result name="error">/usuario.jsp</result>
         </action>
        <action name="GetListadoUsuariosAction" class="actions.GetListadoUsuariosAction">
               <result name="success">/usuario_listado.jsp</result>              
         </action> 
         
  		<action name="TipoDeGastosAction" class="actions.TipoDeGastosAction">  
            <result name="success">/tipoDeGastos.jsp</result>              
        </action>
        <action name="GastosAction" class="actions.GastosAction">  
            <result name="success">/gastosAlta.jsp</result>              
        </action>
        <action name="EdificioAction" class="actions.EdificioAction">  
            <result name="success" type="redirectAction">EdificioListarAction</result>
             <result name="error">/edificioError.jsp</result>               
        </action>
        <action name="EdificioListarAction" class="actions.EdificioListarAction">  
            <result name="success">/edificio.jsp</result> 
             <result name="error">/edificioError.jsp</result>              
        </action>
        <action name="EdificioModifAction" class="actions.EdificioModifAction">  
            <result name="success" type="redirectAction">EdificioListarAction</result> 
             <result name="error">/edificioError.jsp</result>               
        </action>
        <action name="EdificioDeleteAction" class="actions.EdificioDeleteAction">  
            <result name="success" type="redirectAction">EdificioListarAction</result> 
             <result name="error">/edificioError.jsp</result>               
        </action>
    </package>  

	<package name="experimental" extends="hibernate-default">
		<interceptors>
            <!-- An example of the paramsPrepareParams trick. This stack
                 is exactly the same as the defaultStack, except that it
                 includes one extra interceptor before the prepare interceptor:
                 the params interceptor.

                 This is useful for when you wish to apply parameters directly
                 to an object that you wish to load externally (such as a DAO
                 or database or service layer), but can't load that object
                 until at least the ID parameter has been loaded. By loading
                 the parameters twice, you can retrieve the object in the
                 prepare() method, allowing the second params interceptor to
                 apply the values on the object. -->
            <interceptor-stack name="pppStack">
               <interceptor-ref name="exception"/>
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*,^struts\..*</param>
                </interceptor-ref>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="debugging"/>
                <interceptor-ref name="profiling"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload"/>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="params">
                  <param name="excludeParams">dojo\..*,^struts\..*</param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
            </interceptor-stack>
			
			<interceptor-stack name="pppStackHibernate">
				<interceptor-ref name="hibernateSessionInterceptor"/>
				<interceptor-ref name="pppStack"/>
				<interceptor-ref name="hibernateValidatorInterceptor"/>
		    </interceptor-stack>
		</interceptors>

		<action name="responsablesListado" method="listar"
				class="actions.ResponsablesAction">
			<result name="success">/responsablesListado.jsp</result>
		</action>

		<action name="responsablesFormulario" class="actions.ResponsablesAction">
			<result name="success" type="redirectAction">responsablesListado</result>
			<result name="edicion">/responsablesFormulario.jsp</result>
			<result name="error">/error.jsp</result>
			<interceptor-ref name="pppStackHibernate" />
		</action>
		
		<action name="tiposPropiedadesListado" method="listar"
			class="actions.TiposPropiedadesAction">
			<result name="success">/tiposPropiedadesListado.jsp</result>
		</action>

		<action name="tiposPropiedadesFormulario"
				class="actions.TiposPropiedadesAction">
			<result name="success" type="redirectAction">
				<param name="actionName">tiposPropiedadesListado</param>
				<param name="nombreEdificio">${nombreEdificio}</param>
			</result>
			<result name="edicion">/tiposPropiedadesFormulario.jsp</result>
			<result name="error">/error.jsp</result>
			<interceptor-ref name="pppStackHibernate" />
		</action>
		
		<action name="propiedadesListado" method="listar"
			class="actions.PropiedadesAction">
			<result name="success">/propiedadesListado.jsp</result>
		</action>

		<action name="propiedadesFormulario"
				class="actions.PropiedadesAction">
			<result name="success" type="redirectAction">
				<param name="actionName">propiedadesListado</param>
				<param name="nombreEdificio">${nombreEdificio}</param>
			</result>
			<result name="edicion">/propiedadesFormulario.jsp</result>
			<result name="error">/error.jsp</result>
			<interceptor-ref name="pppStackHibernate" />
		</action>
	</package>

	<constant name="hibernatePlugin.customSessionFactoryClass" value="utilidades.HibernateUtil" />
	<constant name="hibernatePlugin.getSessionMethod" value="getSession" />
	<constant name="hibernatePlugin.rebuildSessionFactoryMethod" value="rebuildSessionFactory" />
	<constant name="hibernatePlugin.staticGetSessionMethod" value="true" />
	<constant name="hibernatePlugin.closeSessionMethod" value="closeSession" />
	<constant name="hibernatePlugin.useSessionObjectInCloseSessionMethod" value="true" />
	<constant name="struts.devMode" value="true" />
</struts>  
